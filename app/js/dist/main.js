function loadJSON(a){var b=new XMLHttpRequest;b.overrideMimeType("application/json"),b.open("GET","https://api.myjson.com/bins/3nkdc",!0),b.onreadystatechange=function(){4==b.readyState&&"200"==b.status&&a(b.responseText)},b.send(null)}function callLightbox(a){document.getElementById("white_content").innerHTML=a,document.getElementById("white_content").style.display="block",document.getElementById("black_overlay").style.display="block",document.getElementById("close_lightbox").onclick=function(){closeLightbox()}}function closeLightbox(){document.getElementById("white_content").style.display="none",document.getElementById("black_overlay").style.display="none"}function createProd(a){var b;loadJSON(function(c){var d=JSON.parse(c);console.log(d);for(var e in d.products){var f=document.createElement("li");f.id=d.products[e].id,f.className="prod",f.innerHTML='<img src="images/'+d.products[e].image+'">',document.getElementById("products-list").appendChild(f)}b=document.querySelectorAll(".prod"),"function"==typeof a&&a(b)})}function bindLightbox(a){for(var b=a.length-1;b>=0;--b)document.getElementById(a[b].id).onclick=function(){var a=this.id,b="";b+='<div id="close_lightbox">X</div>',loadJSON(function(c){var d=JSON.parse(c),e=d.potions[a],f=d.potions[a].ingredients;b+='<img src="images/'+e.image+'">',b+='<div class="description">',b+='<p class="feature_titles">'+e.name+"</p>",b+='<p class="feature_titles">Use/Effect:</p>',b+='<p class="feature_desc">'+e.effect+"</p>",b+='<p class="feature_titles">Ingredients:</p>',b+="<ul>";for(var g in f)b+="<li>"+f[g]+"</li>";b+="</ul><br/>",b+='<p class="feature_titles nomargin_padding">Price:</p>',b+='<p class="feature_desc price_value">$'+e.price+"</p>",b+="</div>",b+='<div class="add_cart">ADD TO CART</div>',callLightbox(b)})}}document.addEventListener("DOMContentLoaded",function(){createProd(bindLightbox)});